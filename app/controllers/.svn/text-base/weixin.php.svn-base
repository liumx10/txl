<?php
	include "./wechatclass/wechat.class.php";
	$options = array(
		'token' => 'txl',
		'appid' => 'wxf60f4ddc77fd3187',
		'appsecret' => 'a254d55d59ef7ec9c856b40394603a67'
		);
	$weObj = new wechat($options);
	$type = $weObj->getRev()->getRevType();
	switch ($type) {
		case wechat::MSGTYPE_TEXT:
			$weObj->text("hello, I'm wechat")->reply();
			exit;
			break;
		case wechat::MSGTYPE_EVENT:
			$data = $weObj->getRev()->getRevData();
			$event = $data['Event'];
			if ($event == 'subscribe') {
				$weObj->text("welcome :)")->reply();
			} elseif ($event == 'LOCATION') {
				$Latitude = $data['Latitude'];
				$Longitude = $data['Longitude'];
				$weObj->text("Latitude:\t$Latitude\nLongitude:\t$Longitude")->reply();
			}
			exit;
			break;
		case wechat::MSGTYPE_IMAGE:
			break;
		default:
			$weObj->text("help info")->reply();
	}
?>

